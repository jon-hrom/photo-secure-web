# Редактор коллажей - Документация

## Обзор
Редактор коллажей для фотокниг с двумя режимами работы: автоматический и ручной.

## Основные возможности

### 1. Автоматический режим (по умолчанию)
- **Выбор коллажей**: Библиотека готовых шаблонов с 1, 2 или 3 фото
- **Быстрое применение**: Клик по коллажу применяет его к текущему развороту
- **Автозаполнение**: Кнопка "Автозаполнение" автоматически заполняет все слоты фотографиями

### 2. Ручной режим
Активируется кнопкой "Ручной режим" в верхней панели.

#### Возможности ручного режима:
- ✅ **Перемещение слотов**: Клик и перетаскивание слота по разворoту
- ✅ **Изменение размера**: Перетаскивание фиолетовых угловых точек
- ✅ **Добавление слотов**: Кнопка "Добавить слот" создаёт новый пустой слот
- ✅ **Дублирование слота**: Копирует выбранный слот со смещением
- ✅ **Применение фото**: Выбор фото из правой панели и клик на слот
- ✅ **Очистка фото**: Удаление фото из выбранного слота
- ✅ **Удаление слота**: Полное удаление выбранного слота

### 3. Навигация по разворотам
- **Кнопки навигации**: ← и → для переключения между разворотами
- **Менеджер разворотов**: Миниатюры внизу экрана
  - Обложка (первый разворот)
  - Пронумерованные развороты
  - Кнопка "+" для добавления новых разворотов

### 4. Панель коллажей (левая)
- **Фильтр по количеству фото**: Dropdown с выбором 1/2/3 фото
- **Галерея шаблонов**: Визуальные превью коллажей
- **Активный коллаж**: Подсвечивается фиолетовой рамкой

### 5. Панель фотографий (правая, только в ручном режиме)
- Сетка загруженных фотографий
- Клик на фото → клик на слот = применение
- Визуальный feedback при наведении

## Горячие клавиши (планируется)
- `Delete` - удалить выбранный слот
- `Ctrl+D` - дублировать выбранный слот
- `Ctrl+Z` - отменить
- `Ctrl+Y` - повторить
- `←` / `→` - переключение разворотов

## Технические детали

### Структура данных
```typescript
interface CollageSlot {
  x: number;
  y: number;
  width: number;
  height: number;
  photoId?: string;
}

interface Spread {
  id: string;
  type: 'cover' | 'spread';
  collageId: string;
  slots: CollageSlot[];
}
```

### Шаблоны коллажей
- `COLLAGES_1_PHOTO`: 12 вариантов с 1 фото
- `COLLAGES_2_PHOTO`: 8 вариантов с 2 фото
- `COLLAGES_3_PHOTO`: 2 варианта с 3 фото

### Координаты
Все координаты в пикселях для формата 20x20см (600x600px на страницу)

## Использование

```tsx
import CollageBasedEditor from './CollageBasedEditor';

<CollageBasedEditor
  config={photobookConfig}
  photos={uploadedPhotos}
  onComplete={(spreads) => {
    // Обработка завершённых разворотов
  }}
  onBack={() => {
    // Возврат к предыдущему шагу
  }}
/>
```

## Будущие улучшения
- [ ] Поворот слотов
- [ ] Рамки и эффекты для слотов
- [ ] Текстовые блоки
- [ ] Drag-and-drop фотографий на слоты
- [ ] История изменений (Undo/Redo)
- [ ] Сохранение пользовательских коллажей
